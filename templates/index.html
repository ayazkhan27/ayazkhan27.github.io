<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ayaz Khan's Encryption Demo</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script>
        // Asynchronously encrypts a message using the Khan encryption algorithm.
        // 
        // Retrieves the plaintext message, starting dial position, and superposition
        // sequence length from the corresponding HTML input elements. Sends a POST
        // request to the '/encrypt' endpoint with the message data as JSON in the
        // request body. If the response is successful, sets the encrypted message
        // and decrypted message in the corresponding HTML textareas. If the response
        // is not successful, displays an error message.
        //
        // Returns: None
        async function encryptMessage() {
            const plaintext = document.getElementById('plaintext').value;
            const startPosition = parseInt(document.getElementById('startPosition').value);
            const superpositionLength = parseInt(document.getElementById('superpositionLength').value);

            console.log("Sending request to /encrypt with data:", {
                plaintext, startPosition, superpositionLength
            });

            const response = await fetch('/encrypt', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ plaintext, startPosition, superpositionLength })
            });

            if (response.ok) {
                const data = await response.json();
                console.log("Received response from /encrypt:", data);
                if (data.ciphertext && data.decryptedMessage) {
                    document.getElementById('ciphertext').value = data.ciphertext;
                    document.getElementById('decryptedMessage').value = data.decryptedMessage;
                } else {
                    console.error("Missing ciphertext or decryptedMessage in response:", data);
                    alert("Error: Missing ciphertext or decryptedMessage in response");
                }
            } else {
                const errorText = await response.text();
                console.error('Failed to fetch /encrypt:', response.statusText, errorText);
                alert(`Error: ${response.statusText}`);
            }
        }
    </script>
</head>
<body>
    <header class="bg-primary text-white text-center py-5">
        <h1>Ayaz Khan's Encryption Demo</h1>
    </header>
    <main class="container my-5">
        <section class="mb-5">
            <h2>Challenge</h2>
            <p>Decrypt the following ciphertext to win the prize:</p>
            <textarea id="challengeCiphertext" class="form-control" rows="5" readonly>
                398369403983749039835906398348023983271239834134398329563983537939832956398339623983590639833162398368573983509639833229398331623983521639835096398368263983322939832712398361623983749039832632398349773983616239837490398362063983509639835188398352563983271239834885398328743983749039835096398351883983748639836162398374903983748639835240398324523983463839835240398369423983406439834064398354023983537939834064398374863983749039835096398374863983525639834977398361623983620639834447398374863983488539835096398326323983271239837486398328743983271239836206398336103983345439834732398374863983817039833454
            </textarea>
            <p>If you crack the algorithm and see the hidden message, you'll win $50!</p>
        </section>
        <section class="mb-5">
            <h2>Try the Khan Encryption Algorithm</h2>
            <div class="form-group">
                <label for="plaintext">Enter your message:</label>
                <input type="text" id="plaintext" name="plaintext" class="form-control">
            </div>
            <div class="form-group">
                <label for="startPosition">Starting dial position (integer between 1 and 1050):</label>
                <input type="number" id="startPosition" name="startPosition" class="form-control">
            </div>
            <div class="form-group">
                <label for="superpositionLength">Superposition sequence length (even integer):</label>
                <input type="number" id="superpositionLength" name="superpositionLength" class="form-control">
            </div>
            <button onclick="encryptMessage()" class="btn btn-primary btn-block">Encrypt</button>
            <div class="form-group mt-3">
                <label for="ciphertext">Encrypted message:</label>
                <textarea id="ciphertext" name="ciphertext" class="form-control" rows="3" readonly></textarea>
            </div>
            <div class="form-group">
                <label for="decryptedMessage">Decrypted message:</label>
                <textarea id="decryptedMessage" name="decryptedMessage" class="form-control" rows="3" readonly></textarea>
            </div>
        </section>
        <section>
            <h2>Other Projects</h2>
            <ul>
                <li><a href="https://ia.cr/2024/825">Project 1</a></li>
                <li><a href="https://www.researchgate.net/publication/380167604_Sentiment_Gummy_Worm_A_New_Scoring_Model_for_Anonymous_Data_Incorporating_Decay_Factors_and_Buffer_Ratios?_sg%5B0%5D=x-lpk3AxAMPUjaD-ZfLKjL1FNXjv5RkkhxqwR9gPPUpNvwuI9tgbTvFw71sUwwCdwuw_RMNpNBGSY7inIu1yCw_tGrP3fJ6yUGJmBrY2.E2d19zwcZEsmHFsNE2v3g6tHEhSvR6ljV72WZGU-BHP-PBhN-uERGBHy_d-12jCP

